{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/jack.m/Sites/api-test-cartoncloud/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/jack.m/Sites/api-test-cartoncloud/src/App.js\";\nimport React, { Component } from 'react';\nimport './css/main.css';\nimport axios from 'axios';\nimport Header from './components/HeaderComponent';\nimport Table from './components/TableComponent';\nimport Form from './components/FormComponent';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      deliveries: {},\n      drivers: {},\n      inputDisabled: false,\n      newDeliveryButtonClicked: true,\n      showComponent: false\n    };\n    _this.getData = _this.getData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.newDeliveryButtonClicked = _this.newDeliveryButtonClicked.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.editButtonClicked = _this.editButtonClicked.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeRecord = _this.removeRecord.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getData();\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var drivers, deliveries;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"http://localhost:8000/api/drivers.php\");\n\n              case 2:\n                drivers = _context.sent;\n                _context.next = 5;\n                return axios.get(\"http://localhost:8000/api/deliveries.php\").catch(function (error) {\n                  console.log(error);\n                });\n\n              case 5:\n                deliveries = _context.sent;\n                this.setState({\n                  deliveries: deliveries.data,\n                  drivers: drivers.data\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function getData() {\n        return _getData.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      e.preventDefault();\n\n      if (this.state.showComponent && this.state.newDeliveryButtonClicked) {\n        axios.post(\"http://localhost:8000/api/deliveries.php\", {\n          \"date\": e.target.elements.date.value,\n          \"name\": e.target.elements.deliveryName.value,\n          \"driver_id\": e.target.elements.selectDriver.value\n        }).then(this.getData()).catch(function (error) {\n          console.log(error);\n        });\n      } else {\n        axios.put(\"http://localhost:8000/api/deliveries.php?id=15\", {\n          \"driver_id\": e.target.elements.selectDriver.value\n        }).then(this.getData()).catch(function (error) {\n          console.log(error);\n        });\n      }\n\n      this.setState({\n        showComponent: false\n      });\n    }\n  }, {\n    key: \"removeRecord\",\n    value: function removeRecord() {\n      var id = this.props.value;\n      axios.delete(\"http://localhost:8000/api/deliveries.php?id=\".concat(id)).then(this.getData()).catch(function (error) {\n        console.log(error);\n      });\n      console.log('deleted');\n    }\n  }, {\n    key: \"newDeliveryButtonClicked\",\n    value: function newDeliveryButtonClicked() {\n      var _this2 = this;\n\n      // this.setState ({\n      //     inputDisabled: false,\n      //     newDeliveryButtonClicked: true,\n      //     showComponent: true\n      // })\n      var a = Object.keys(this.state.deliveries);\n      a.map(function (item, i) {\n        console.log(item);\n        console.log('-----------------');\n        _this2.state.deliveries[item].id = item;\n        console.log(_this2.state.deliveries[item]);\n      });\n    }\n  }, {\n    key: \"editButtonClicked\",\n    value: function editButtonClicked() {\n      this.setState({\n        inputDisabled: true,\n        newDeliveryButtonClicked: false,\n        showComponent: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Header, {\n        onClick: this.newDeliveryButtonClicked,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), this.state.showComponent && React.createElement(Form, {\n        value: this.state.drivers,\n        onSubmit: this.handleSubmit,\n        inputDisabled: this.state.inputDisabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(Table, {\n        value: this.state,\n        onClick: this.editButtonClicked,\n        removeRecord: this.removeRecord,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/jack.m/Sites/api-test-cartoncloud/src/App.js"],"names":["React","Component","axios","Header","Table","Form","App","props","state","deliveries","drivers","inputDisabled","newDeliveryButtonClicked","showComponent","getData","bind","handleSubmit","editButtonClicked","removeRecord","get","catch","error","console","log","setState","data","e","preventDefault","post","target","elements","date","value","deliveryName","selectDriver","then","put","id","delete","a","Object","keys","map","item","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './css/main.css';\nimport axios from 'axios';\nimport Header from './components/HeaderComponent';\nimport Table from './components/TableComponent';\nimport Form from './components/FormComponent';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            deliveries: {},\n            drivers: {},\n            inputDisabled: false,\n            newDeliveryButtonClicked: true,\n            showComponent: false\n        }\n        this.getData = this.getData.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.newDeliveryButtonClicked = this.newDeliveryButtonClicked.bind(this);\n        this.editButtonClicked = this.editButtonClicked.bind(this);\n        this.removeRecord = this.removeRecord.bind(this);\n    }\n\n    componentDidMount() {\n        this.getData();\n    }\n\n    async getData() {\n        const drivers = await axios.get(\"http://localhost:8000/api/drivers.php\");\n        const deliveries = await axios.get(\"http://localhost:8000/api/deliveries.php\")\n            .catch(error => {\n                console.log(error);\n            });\n\n        this.setState({\n            deliveries: deliveries.data,\n            drivers: drivers.data,\n        });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        if (this.state.showComponent && this.state.newDeliveryButtonClicked) {\n            axios.post(\"http://localhost:8000/api/deliveries.php\", {\n                \"date\": e.target.elements.date.value,\n                \"name\": e.target.elements.deliveryName.value,\n                \"driver_id\": e.target.elements.selectDriver.value\n            })\n            .then (\n                this.getData()\n            )\n            .catch(error => {\n                console.log(error);\n            })\n        } else {\n            axios.put(\"http://localhost:8000/api/deliveries.php?id=15\", {\n                \"driver_id\": e.target.elements.selectDriver.value\n            })\n            .then (\n                this.getData()\n            )\n            .catch(error => {\n                console.log(error);\n            })\n        }\n        this.setState({\n            showComponent: false\n        });\n    }\n\n    removeRecord () {\n        let id = this.props.value;\n        axios.delete(`http://localhost:8000/api/deliveries.php?id=${id}`)           \n            .then (\n                this.getData()\n            )\n            .catch(error => {\n                console.log(error);\n            });\n       console.log('deleted');\n    }\n\n    newDeliveryButtonClicked () {\n        // this.setState ({\n        //     inputDisabled: false,\n        //     newDeliveryButtonClicked: true,\n        //     showComponent: true\n        // })\n\n        let a = Object.keys(this.state.deliveries);\n        a.map((item, i) => {\n            console.log(item);\n            console.log('-----------------');\n            this.state.deliveries[item].id = item;\n            console.log(this.state.deliveries[item]);\n        })\n    }\n\n    editButtonClicked () {\n        this.setState ({\n            inputDisabled: true,\n            newDeliveryButtonClicked: false,\n            showComponent: true\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <Header onClick={this.newDeliveryButtonClicked}/>\n                <hr />\n                {\n                this.state.showComponent &&\n                <Form \n                    value={this.state.drivers} \n                    onSubmit={this.handleSubmit} \n                    inputDisabled={this.state.inputDisabled}\n                />\n                }\n                <hr />\n                <Table value={this.state} onClick = {this.editButtonClicked} removeRecord = {this.removeRecord}/>\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}